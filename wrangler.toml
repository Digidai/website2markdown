name = "website2markdown"
main = "src/index.ts"
compatibility_date = "2025-02-14"
compatibility_flags = ["nodejs_compat"]

[browser]
binding = "MYBROWSER"

# KV namespace for caching converted markdown
[[kv_namespaces]]
binding = "CACHE_KV"
id = "ce411570e9734bae989e03c705804c94"

# R2 bucket for storing images
[[r2_buckets]]
binding = "IMAGE_BUCKET"
bucket_name = "md-images"

[observability]
enabled = true

# Rate limiting: configure via Cloudflare Dashboard → Security → WAF → Rate Limiting Rules
# Recommended: limit /api/batch to 10 req/min per IP, and all routes to 60 req/min per IP

# Secrets (set via `wrangler secret put API_TOKEN`):
# API_TOKEN — Bearer token for POST /api/batch authentication

# Custom domain configuration — update with your actual domain
# routes = [
#   { pattern = "your-domain.example.com/*", zone_name = "example.com" }
# ]
